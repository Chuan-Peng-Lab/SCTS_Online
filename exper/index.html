<!DOCTYPE html>
<html lang="zh-cn">
    <head>
        <meta charset="UTF=8">
        <title>社会认知词库量表</title>
        <!-- 实用工具 -->
        <script src='../assets/js/jquery-3.6.0.min.js'></script>
        <!-- 核心引用 -->
        <link href="../assets/jspsych/css/jspsych.css" rel="stylesheet" type="text/css">
        <script src="../assets/jspsych/jspsych.js"></script>
        <script src="../assets/jspsych/plugins/jspsych-survey-multi-choice.js"></script>
        <script src="../assets/jspsych/plugins/jspsych-fullscreen.js"></script>
        <script src="../assets/jspsych/plugins/jspsych-instructions.js"></script>
        <script src="../assets/jspsych/plugins/jspsych-survey-likert.js"></script>
    </head>
    <body style="text-align: center;"></body>
    <script>



        let wordAll = []; //定义单词库


        let timeline = []; // 定义空的时间线

        function begin_introduction () {
            return {
                timeline: [
                    {
                        type: 'fullscreen',
                        fullscreen_mode: true,
                        message: "<p style='font: bold 42px 微软雅黑; color: #B22222'>\
                            欢迎参与我们的实验</p>\
                            <p style='font: 30px 微软雅黑; color: black'><br/>\
                            <单击下方 我同意 进入实验程序><br/><b>实验过程中请勿退出全屏</b>\
                            <br/><br/></p>\
                            <p style='font: 24px 华文中宋; color: grey'>\
                            南京师范大学心理学院<br/>2021年</p>",
                            button_label: "我同意"
                    },
                    {
                        type: "instructions",
                        pages: [
                            "<p style='text-align: left'>\
                            指导语：<br/>\
                            指导语内容</p>",
                        ],
                        show_clickable_nav: true,
                        allow_backward: false,
                        button_label_previous: "返回",
                        button_label_next: "继续",
                    }
                ]
            }
        }
        timeline.push(begin_introduction());

        // 第一部分 评分
        var scale = ["Strongly Disagree", "Disagree", "Neutral", "Agree", "Strongly Agree"];

        let proc1 = {
            type: 'survey-likert',
            questions: [
              {prompt: "<strong>能力👇</strong>", name: 'ability', labels: scale, required: true}, 
              {prompt: "<strong>道德👇</strong>", name: 'morality', labels: scale, required: true},
              {prompt: "<strong>社交能力👇</strong>", name: 'socialSkills', labels: scale, required: true},
              {prompt: "<strong>外表👇</strong>", name: 'appearance', labels: scale, required: true},
              {prompt: "<strong>社会经济地位👇</strong>", name: 'socioeconomicStatus', labels: scale, required: true}
            ],
            preamble: '<p style="font-size: 30px;font-weight: 700;color: red;">[单词列表]</p>',
            scale_width: 500,
            on_load: function() { 
                    // 让 标签 左移
                    let a = document.getElementsByClassName("jspsych-survey-likert-statement");
                    for (let i = 0; i < a.length; i++){ 
                        a[i].style.textAlign = "left";
                        a[i].style.paddingTop = "0px";
                    }
                    // 隐藏 continue 按钮
                    document.getElementById("jspsych-survey-likert-next").style.visibility="hidden";

                    $("input[type=radio]").on("input", function(a){
                        // 判断是否全部选择了
                        // 如果全部选择了，则延迟1秒跳转
                        if($("input[name=Q0]:checked").length > 0 && 
                            $("input[name=Q1]:checked").length > 0 && 
                            $("input[name=Q2]:checked").length > 0 &&
                            $("input[name=Q3]:checked").length > 0 && 
                            $("input[name=Q4]:checked").length > 0){ 
                            setTimeout(function(){
                                $("#jspsych-survey-likert-next").click()
                            }, 1500);
                        }
                    })
                },
                on_finish: function(data) { 
                    // 五维度评分结果呈现
                    data.ability = data.response.ability;
                    data.morality = data.response.morality;
                    data.socialSkills = data.response.socialSkills;
                    data.appearance = data.response.appearance;
                    data.socioeconomicStatus = data.response.socioeconomicStatus;
                }
        };
        timeline.push(proc1);

        // 第二部分 匹配程度评分
        let proc2 = {
            type: 'survey-multi-choice',
            questions: [
                {prompt: '[单词A]用于描述【】维度', options: [1,2,3,4,5,6,7,8,9], required: true, horizontal: true}
            ],
            on_load: function() { 
                // 定义头部文字样式
                document.getElementsByClassName("survey-multi-choice")[0].style = "text-align: center; font-size: 25px;";

                // 隐藏 continue 按钮
                document.getElementById("jspsych-survey-multi-choice-next").style.visibility="hidden";
                
                // 创建下方提示语
                let p = document.createElement("p");
                p.innerHTML = "请表明你对该陈述的同意程度<br/>（1 = 非常不同意，9 = 非常同意）";
                p.style = "font-size: 30px; font-weight: normal;";
                document.getElementById("jspsych-content").appendChild(p);

                $("input[type=radio]").on("input", function(a){
                    // 判断是否全部选择了
                    // 如果全部选择了，则延迟1秒跳转
                    if($("input[type=radio]:checked").length > 0){ 
                        setTimeout(function(){
                            $("#jspsych-survey-multi-choice-next").click()
                        }, 1500);
                    }
                })
            },
            on_finish: function(data) { 
                // 分值的呈现
                data.recognition = data.response.Q0;
            }
        };
        timeline.push(proc2);

        // 第三部分 效度打分
        let proc3 = {
            type: 'survey-multi-choice',
            questions: [
                {prompt: '[单词A]', options: [1,2,3,4,5,6,7,8,9], required: true, horizontal: true}
            ],
            on_load: function() { 
                // 定义头部文字样式
                document.getElementsByClassName("survey-multi-choice")[0].style = "text-align: center; font-size: 25px;";

                // 隐藏 continue 按钮
                document.getElementById("jspsych-survey-multi-choice-next").style.visibility="hidden";
                
                // 创建下方提示语
                let p = document.createElement("p");
                p.innerHTML = "请表明你对该单词的积极/消极程度评分<br/>（1 = 非常消极，9 = 非常积极）";
                p.style = "font-size: 30px; font-weight: normal;";
                document.getElementById("jspsych-content").appendChild(p);

                $("input[type=radio]").on("input", function(a){
                    // 判断是否全部选择了
                    // 如果全部选择了，则延迟1秒跳转
                    if($("input[type=radio]:checked").length > 0){ 
                        setTimeout(function(){
                            $("#jspsych-survey-multi-choice-next").click()
                        }, 1500);
                    }
                })
            },
            on_finish: function(data) { 
                // 分值的呈现
                data.validity = data.response.Q0;
            }
        };
        timeline.push(proc3);

        jsPsych.init({
            timeline: timeline,
            on_finish: function() { 
                jsPsych.data.displayData();
            },
            
        });
    </script>
</html>